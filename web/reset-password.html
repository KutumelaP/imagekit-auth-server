<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reset Password • Mzansi Marketplace</title>
    <style>
      :root {
        --deep: #1F4654;
        --cloud: #7FB2BF;
        --angel: #F2F7F9;
      }
      html, body { height: 100%; }
      body {
        margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
        background: linear-gradient(180deg, var(--angel), #CCE0E6);
        color: #222;
      }
      .wrap { display:flex; align-items:center; justify-content:center; min-height:100%; padding: 24px; }
      .card {
        width: 100%; max-width: 460px; background: #fff; border-radius:16px;
        box-shadow: 0 16px 40px rgba(31,70,84,.12);
        overflow:hidden;
      }
      .header { background: var(--deep); color:#fff; padding:20px 24px; font-weight:700; font-size:18px; }
      .body { padding: 20px 24px; }
      .field { display:flex; flex-direction:column; gap:6px; margin-top: 12px; }
      label { font-size: 14px; color:#333; }
      input { padding:12px; border:1px solid #BFD1D7; border-radius:10px; font-size:16px; }
      input:focus { outline: none; border-color: var(--deep); box-shadow: 0 0 0 3px rgba(31,70,84,.12); }
      .btn { margin-top:16px; display:inline-block; background: linear-gradient(180deg, var(--deep), var(--cloud));
        color:#fff; text-decoration:none; padding:12px 16px; border-radius:10px; font-weight:600; border:none; cursor:pointer; width:100%; }
      .muted { color:#667; font-size:12px; margin-top:12px; }
      .error { color:#b00020; margin-top:10px; font-size:14px; }
      .success { color:#0d7a46; margin-top:10px; font-size:14px; }
      .footer { padding: 14px 24px; background: var(--angel); color:#667; font-size:12px; text-align:center; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyB7r9Z3sDO_aqjZNGSoi6jVAfSrDt-wFys",
        authDomain: "marketplace-8d6bd.firebaseapp.com",
        projectId: "marketplace-8d6bd",
      };
      firebase.initializeApp(firebaseConfig);
      async function resetPassword(evt) {
        evt.preventDefault();
        const params = new URLSearchParams(location.search);
        const mode = params.get('mode');
        const oobCode = params.get('oobCode');
        const newPass = document.getElementById('password').value;
        const msg = document.getElementById('msg');
        msg.textContent = '';
        try {
          if (mode !== 'resetPassword' || !oobCode) throw new Error('Invalid or missing reset link.');
          await firebase.auth().confirmPasswordReset(oobCode, newPass);
          msg.className = 'success';
          msg.textContent = 'Password updated. You can close this tab and sign in.';
        } catch (e) {
          msg.className = 'error';
          msg.textContent = e.message || 'Failed to reset password.';
        }
      }
    </script>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="header">Reset your password</div>
        <form class="body" onsubmit="resetPassword(event)">
          <div class="field">
            <label for="password">New password</label>
            <input id="password" type="password" minlength="6" required placeholder="Enter a new password" />
          </div>
          <button class="btn" type="submit">Update password</button>
          <div id="msg" class="muted"></div>
          <div class="muted">If this wasn’t you, no changes will be made unless you submit.</div>
        </form>
        <div class="footer">© Mzansi Marketplace</div>
      </div>
    </div>
  </body>
  </html>


